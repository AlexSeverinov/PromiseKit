<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Promisekit by mxcl</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Promisekit</h1>
        <p>A delightful Promises implementation for iOS</p>
        <p class="view"><a href="https://github.com/mxcl/PromiseKit">View the Project on GitHub <small>mxcl/PromiseKit</small></a></p>
        <ul>
          <li><a href="https://github.com/mxcl/PromiseKit/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/mxcl/PromiseKit/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/mxcl/PromiseKit">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p>PromiseKit aims to make dealing with asynchronicity in your iPhone app <em>delightful</em>. PromiseKit is not just a Promises implementation, it is also a collection of helper functions that make the typical asyncronous patterns we use in iOS development <em>delightful</em> too.</p>

<p>Modern development is highly asynchronous: isn’t it about time we had tools that made programming asynchronously powerful, easy and delightful?</p>

<h1>
<a name="what-is-a-promise" class="anchor" href="#what-is-a-promise"><span class="octicon octicon-link"></span></a>What is a Promise?</h1>

<p>A promise is an intent to accomplish an asyncronous task. Eg. some library promises to download a <a href="http://gravatar.com">gravatar</a>:</p>

<div class="highlight highlight-objc"><pre><span class="cp">#import "PromiseKit.h"</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">gravatar</span> <span class="p">{</span>
    <span class="n">Promise</span> <span class="o">*</span><span class="n">promise</span> <span class="o">=</span> <span class="p">[</span><span class="n">ABCDoEverythingLibrary</span> <span class="n">gravatarURLForEmail</span><span class="o">:</span><span class="n">self</span><span class="p">.</span><span class="n">email</span><span class="p">];</span>

    <span class="n">promise</span><span class="p">.</span><span class="n">then</span><span class="p">(</span><span class="o">^</span><span class="p">(</span><span class="n">UIImage</span> <span class="o">*</span><span class="n">img</span><span class="p">){</span>
        <span class="n">self</span><span class="p">.</span><span class="n">imageView</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">img</span><span class="p">;</span>
    <span class="p">}).</span><span class="n">fail</span><span class="p">(</span><span class="o">^</span><span class="p">(</span><span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">){</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
    <span class="p">})</span>
<span class="p">}</span>
</pre></div>

<p>A key feature of promises is that they are <em>thennable</em>.</p>

<p>Another key feature is that they are <em>chainable</em>.</p>

<p>The designer changes their mind (again). They want us to overlay a kitten on the gravatar:</p>

<div class="highlight highlight-objc"><pre><span class="cp">#import "PromiseKit.h"</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">gravatar</span> <span class="p">{</span>
    <span class="n">UIImage</span> <span class="o">*</span><span class="n">gravatarImage</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>

    <span class="p">[</span><span class="n">ABCDoEverythingLibrary</span> <span class="n">gravatarURLForEmail</span><span class="o">:</span><span class="n">self</span><span class="p">.</span><span class="n">email</span><span class="p">].</span><span class="n">then</span><span class="p">(</span><span class="o">^</span><span class="p">(</span><span class="n">UIImage</span> <span class="o">*</span><span class="n">img</span><span class="p">){</span>
        <span class="n">gravatarImage</span> <span class="o">=</span> <span class="n">img</span><span class="p">;</span>
    <span class="p">}).</span><span class="n">fail</span><span class="p">(</span><span class="o">^</span><span class="p">(</span><span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">){</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
    <span class="p">}).</span><span class="n">then</span><span class="p">(</span><span class="o">^</span><span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">NSURLConnection</span> <span class="n">GET</span><span class="o">:</span><span class="s">@"http://placekitten.com/100/100"</span><span class="p">];</span>
    <span class="p">}).</span><span class="n">then</span><span class="p">(</span><span class="o">^</span><span class="p">(</span><span class="n">UIImage</span> <span class="o">*</span><span class="n">kittenImage</span><span class="p">){</span>
        <span class="n">self</span><span class="p">.</span><span class="n">imageView</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIImage</span> <span class="n">draw</span><span class="o">:</span><span class="n">kittenImage</span> <span class="n">over</span><span class="o">:</span><span class="n">gravatarImage</span><span class="p">];</span>
    <span class="p">});</span>
<span class="p">}</span>
</pre></div>

<p>Whoops! We aren’t handling the potential <code>NSURLConnection</code> error. Errors bubble up to the next fail handler, but they won't go backwards.</p>

<div class="highlight highlight-objc"><pre><span class="cp">#import "PromiseKit.h"</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">gravatar</span> <span class="p">{</span>
    <span class="n">UIImage</span> <span class="o">*</span><span class="n">gravatarImage</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>

    <span class="p">[</span><span class="n">ABCDoEverythingLibrary</span> <span class="n">gravatarURLForEmail</span><span class="o">:</span><span class="n">self</span><span class="p">.</span><span class="n">email</span><span class="p">].</span><span class="n">then</span><span class="p">(</span><span class="o">^</span><span class="p">(</span><span class="n">UIImage</span> <span class="o">*</span><span class="n">img</span><span class="p">){</span>
        <span class="n">gravatarImage</span> <span class="o">=</span> <span class="n">img</span><span class="p">;</span>
    <span class="p">}).</span><span class="n">then</span><span class="p">(</span><span class="o">^</span><span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">NSURLConnection</span> <span class="n">GET</span><span class="o">:</span><span class="s">@"http://placekitten.com/100/100"</span><span class="p">];</span>
    <span class="p">}).</span><span class="n">then</span><span class="p">(</span><span class="o">^</span><span class="p">(</span><span class="n">UIImage</span> <span class="o">*</span><span class="n">kittenImage</span><span class="p">){</span>
        <span class="n">self</span><span class="p">.</span><span class="n">imageView</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIImage</span> <span class="n">draw</span><span class="o">:</span><span class="n">kittenImage</span> <span class="n">over</span><span class="o">:</span><span class="n">gravatarImage</span><span class="p">];</span>
    <span class="p">}).</span><span class="n">fail</span><span class="p">(</span><span class="o">^</span><span class="p">(</span><span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">){</span>
        <span class="c1">// moved to the end: any errors or thrown exceptions will bubble up</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>
</pre></div>

<p>Notably exceptions are caught and bubbled up also.</p>

<p>Later we decide to refactor this code so our <code>imageView</code> is set elsewhere:</p>

<div class="highlight highlight-objc"><pre><span class="cp">#import "PromiseKit.h"</span>

<span class="k">-</span> <span class="p">(</span><span class="n">Promise</span> <span class="o">*</span><span class="p">)</span><span class="nf">gravatar</span> <span class="p">{</span>
    <span class="n">UIImage</span> <span class="o">*</span><span class="n">gravatarImage</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">ABCDoEverythingLibrary</span> <span class="n">gravatarURLForEmail</span><span class="o">:</span><span class="n">self</span><span class="p">.</span><span class="n">email</span><span class="p">].</span><span class="n">then</span><span class="p">(</span><span class="o">^</span><span class="p">(</span><span class="n">UIImage</span> <span class="o">*</span><span class="n">img</span><span class="p">){</span>
        <span class="n">gravatarImage</span> <span class="o">=</span> <span class="n">img</span><span class="p">;</span>
    <span class="p">}).</span><span class="n">then</span><span class="p">(</span><span class="o">^</span><span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">NSURLConnection</span> <span class="n">GET</span><span class="o">:</span><span class="s">@"http://placekitten.com/100/100"</span><span class="p">];</span>
    <span class="p">}).</span><span class="n">then</span><span class="p">(</span><span class="o">^</span><span class="p">(</span><span class="n">UIImage</span> <span class="o">*</span><span class="n">kittenImage</span><span class="p">){</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">UIImage</span> <span class="n">draw</span><span class="o">:</span><span class="n">kittenImage</span> <span class="n">over</span><span class="o">:</span><span class="n">gravatarImage</span><span class="p">];</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span> <span class="p">{</span>
    <span class="n">self</span><span class="p">.</span><span class="n">gravatar</span><span class="p">.</span><span class="n">then</span><span class="p">(</span><span class="o">^</span><span class="p">(</span><span class="n">UIImage</span> <span class="o">*</span><span class="n">img</span><span class="p">){</span>
        <span class="n">self</span><span class="p">.</span><span class="n">imageView</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">img</span><span class="p">;</span>
    <span class="p">}).</span><span class="n">fail</span><span class="p">(</span><span class="o">^</span><span class="p">(</span><span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">){</span>
        <span class="c1">//TODO UIAlertView</span>
    <span class="p">});</span>
<span class="p">}</span>
</pre></div>

<p>In production we find that <code>ABCDoEverythingLibrary</code> is a buggy, bloated mostrosity. So we hastily reinvent the wheel:</p>

<div class="highlight highlight-objc"><pre><span class="cp">#import "PromiseKit.h"</span>

<span class="k">-</span> <span class="p">(</span><span class="n">Promise</span> <span class="o">*</span><span class="p">)</span><span class="nf">gravatar</span> <span class="p">{</span>
    <span class="n">UIImage</span> <span class="o">*</span><span class="n">gravatarImage</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">Promise</span> <span class="n">md5</span><span class="o">:</span><span class="n">self</span><span class="p">.</span><span class="n">email</span><span class="p">].</span><span class="n">then</span><span class="p">(</span><span class="o">^</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="n">md5</span><span class="p">){</span>
        <span class="c1">// The MD5 is crunched in a background GCD queue</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">NSURLConnection</span> <span class="n">GET</span><span class="o">:</span><span class="s">@"http://gravatar.com/avatar/%@"</span><span class="p">,</span> <span class="n">md5</span><span class="p">];</span>
    <span class="p">}).</span><span class="n">then</span><span class="p">(</span><span class="o">^</span><span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">NSURLConnection</span> <span class="n">GET</span><span class="o">:</span><span class="s">@"http://placekitten.com/100/100"</span><span class="p">];</span>
    <span class="p">}).</span><span class="n">then</span><span class="p">(</span><span class="o">^</span><span class="p">(</span><span class="n">UIImage</span> <span class="o">*</span><span class="n">kittenImage</span><span class="p">){</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">UIImage</span> <span class="n">draw</span><span class="o">:</span><span class="n">kittenImage</span> <span class="n">over</span><span class="o">:</span><span class="n">gravatarImage</span><span class="p">];</span>
    <span class="p">});</span>
<span class="p">}</span>
</pre></div>

<p>Later we realize we’re wasting our users’ lives by downloading the two images
consequentively:</p>

<div class="highlight highlight-objc"><pre><span class="cp">#import "PromiseKit.h"</span>

<span class="k">-</span> <span class="p">(</span><span class="n">Promise</span> <span class="o">*</span><span class="p">)</span><span class="nf">gravatar</span> <span class="p">{</span>
    <span class="n">UIImage</span> <span class="o">*</span><span class="n">gravatarImage</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">Promise</span> <span class="n">md5</span><span class="o">:</span><span class="n">self</span><span class="p">.</span><span class="n">email</span><span class="p">].</span><span class="n">then</span><span class="p">(</span><span class="o">^</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="n">md5</span><span class="p">){</span>
        <span class="kt">id</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSURLConnection</span> <span class="n">GET</span><span class="o">:</span><span class="s">@"http://gravatar.com/avatar/%@"</span><span class="p">,</span> <span class="n">md5</span><span class="p">];</span>
        <span class="kt">id</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSURLConnection</span> <span class="n">GET</span><span class="o">:</span><span class="s">@"http://placekitten.com/100/100"</span><span class="p">];</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Promise</span> <span class="n">when</span><span class="o">:</span><span class="p">@[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]];</span>
    <span class="p">}).</span><span class="n">then</span><span class="p">(</span><span class="o">^</span><span class="p">(</span><span class="n">NSArray</span> <span class="o">*</span><span class="n">images</span><span class="p">){</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">UIImage</span> <span class="n">draw</span><span class="o">:</span><span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="n">over</span><span class="o">:</span><span class="n">images</span><span class="p">[</span><span class="mi">1</span><span class="p">]];</span>
    <span class="p">});</span>
<span class="p">}</span>
</pre></div>

<p>We realize we need to preload the next gravatar when <code>viewWillAppear</code> is called (or after) but the first gravatar must have loaded first:</p>

<div class="highlight highlight-objc"><pre><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span> <span class="p">{</span>
    <span class="n">self</span><span class="p">.</span><span class="n">gravatar</span><span class="p">.</span><span class="n">then</span><span class="p">(</span><span class="o">^</span><span class="p">(</span><span class="n">UIImage</span> <span class="o">*</span><span class="n">img</span><span class="p">){</span>
        <span class="n">self</span><span class="p">.</span><span class="n">imageView</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">img</span><span class="p">;</span>
    <span class="p">}).</span><span class="n">fail</span><span class="p">(</span><span class="o">^</span><span class="p">(</span><span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">){</span>
        <span class="c1">//TODO UIAlertView</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewWillAppear:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">animated</span> <span class="p">{</span>
    <span class="n">self</span><span class="p">.</span><span class="n">gravatar</span><span class="p">.</span><span class="n">then</span><span class="p">(</span><span class="o">^</span><span class="p">{</span>
        <span class="p">[</span><span class="n">self</span> <span class="n">fetchNextGravatar</span><span class="p">];</span>
    <span class="p">});</span>
<span class="p">}</span>
</pre></div>

<p>This is a key concept in Promises. If the asynchronous task has finished, or is pending, it doesn't matter, we can still chain other tasks onto that Promise and know they will be handled either now or later, and in our chosen order.</p>

<h2>
<a name="the-niceties" class="anchor" href="#the-niceties"><span class="octicon octicon-link"></span></a>The Niceties</h2>

<p>We provide some convenience methods on <code>NSURLConnection</code> that return promises:</p>

<div class="highlight highlight-objc"><pre><span class="k">+</span> <span class="p">(</span><span class="n">Promise</span> <span class="o">*</span><span class="p">)</span><span class="nf">GET:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">stringFormatOrURL</span><span class="p">,</span> <span class="p">...</span>
<span class="k">+</span> <span class="p">(</span><span class="n">Promise</span> <span class="o">*</span><span class="p">)</span><span class="nf">promise:</span><span class="p">(</span><span class="n">NSURLRequest</span> <span class="o">*</span><span class="p">)</span><span class="nv">request</span><span class="p">;</span>

<span class="c1">// et cetera</span>
</pre></div>

<p>We also detect if the content-type is JSON or an image and process the data into a <code>UIImage</code>, etc. in a background thread.</p>

<p>We provide a promise for <code>CLLocationManager</code>:</p>

<div class="highlight highlight-objc"><pre><span class="p">[</span><span class="n">CLLocationManager</span> <span class="n">promise</span><span class="p">].</span><span class="n">then</span><span class="p">(</span><span class="o">^</span><span class="p">(</span><span class="n">CLLocation</span> <span class="o">*</span><span class="n">location</span><span class="p">){</span>
    <span class="c1">// woot</span>
<span class="p">});</span>
</pre></div>

<p>We provide a promise structure for modally presenting <code>UIViewController</code>s:</p>

<div class="highlight highlight-objc"><pre>
<span class="k">@implementation</span> <span class="nc">MyRootViewController</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">foo</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">self</span> <span class="n">promiseViewController</span><span class="o">:</span><span class="p">[</span><span class="n">MyDetailViewController</span> <span class="n">new</span><span class="p">]</span> <span class="n">animated</span><span class="o">:</span><span class="nb">YES</span> <span class="n">completion</span><span class="o">:</span><span class="nb">nil</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">@end</span>


<span class="k">@implementation</span> <span class="nc">MyDetailViewController</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewWillDefer:</span><span class="p">(</span><span class="n">Deferred</span> <span class="o">*</span><span class="p">)</span><span class="nv">deferred</span> <span class="p">{</span>
    <span class="c1">// save this and resolve/reject it when you are done</span>
    <span class="n">_deferred</span> <span class="o">=</span> <span class="n">deferred</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">onCompletedWhatever</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">_deferred</span> <span class="n">resolve</span><span class="o">:</span><span class="n">self</span><span class="p">.</span><span class="n">textField</span><span class="p">.</span><span class="n">text</span><span class="p">];</span>  <span class="c1">// dismisses the viewController</span>
<span class="p">}</span>

<span class="k">@end</span>
</pre></div>

<h1>
<a name="deferred" class="anchor" href="#deferred"><span class="octicon octicon-link"></span></a>Deferred</h1>

<p>You won’t use PromiseKit for long before you need to make your own promises. As per other Promise implementations we use the Deferred pattern. Create a deferred and return its promise to the caller. Then <code>resolve</code> or <code>reject</code> the deferred according to the result of your asyncronous operation.</p>

<div class="highlight highlight-objc"><pre><span class="k">-</span> <span class="p">(</span><span class="n">Promise</span> <span class="o">*</span><span class="p">)</span><span class="nf">randomNumbers</span> <span class="p">{</span>
    <span class="n">Deferred</span> <span class="o">*</span><span class="n">deferred</span> <span class="o">=</span> <span class="p">[</span><span class="n">Deferred</span> <span class="n">new</span><span class="p">];</span>
    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">operationQueue</span> <span class="n">addOperationWithBlock</span><span class="o">:^</span><span class="p">{</span>
        <span class="n">NSMutableArray</span> <span class="o">*</span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableArray</span> <span class="n">new</span><span class="p">];</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">;</span> <span class="n">x</span><span class="o">++</span><span class="p">)</span>
            <span class="p">[</span><span class="n">numbers</span> <span class="n">addObject</span><span class="o">:</span><span class="p">@(</span><span class="n">arc4random</span><span class="p">())];</span>
        <span class="p">[</span><span class="n">deferred</span> <span class="n">resolve</span><span class="o">:</span><span class="n">numbers</span><span class="p">];</span>
    <span class="p">}];</span>
    <span class="k">return</span> <span class="n">deferred</span><span class="p">.</span><span class="n">promise</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<h1>
<a name="important-details-regarding-promises" class="anchor" href="#important-details-regarding-promises"><span class="octicon octicon-link"></span></a>Important Details Regarding “Promises”</h1>

<ol>
<li>A promise moves from its <code>pending</code> state to either <code>resolved</code> or <code>rejected</code> <em>exactly <strong>once</strong></em>.</li>
<li>A resolved or rejected promise that is <code>then</code>’d or <code>fail</code>’d executes the newly provided block immediately with its already <code>resolved</code> or <code>rejected</code> value.</li>
<li>Errors bubble upwards to the first available fail handler, then stop bubbling. Then handlers do not bubble. This is so fail handlers behave more like <code>@try</code> and <code>@catch</code>.</li>
</ol><h1>
<a name="but-this-isnt-promisesabdkiss" class="anchor" href="#but-this-isnt-promisesabdkiss"><span class="octicon octicon-link"></span></a>But! This isn’t Promises/A/B/D/KISS…</h1>

<p>The Promises specification is a bit of a mess. As is the nature of new programming patterns, we learn best practices as we go. I've used a bunch of Promises implementations across different platforms, and have now written a few too. My experience leads me to <code>then</code> being the success handler and <code>fail</code> the fail handler with an additional handler for the <em>both</em> case (here currently <code>yolo</code>).</p>

<p>We have no progress handler, because Cocoa now has <code>NSProgress</code>… so use that.</p>

<h1>
<a name="alternatives" class="anchor" href="#alternatives"><span class="octicon octicon-link"></span></a>Alternatives</h1>

<p>PromiseKit is more or less unique, but the idea of <em>Promises</em> is not, and thus there are other projects to look at:</p>

<ol>
<li>Most famously is <a href="https://github.com/BoltsFramework/Bolts-iOS">Bolts</a>. I explored using this before making PromiseKit. I found that it didn’t make my code nicer than just implementing my own state machine.</li>
<li>
<a href="https://github.com/couchdeveloper/RXPromise">RXPromise</a> is a nice Promises implementation without any of the convenience nicities that PromiseKit provides and with the somewhat irritating condition that <code>then</code> is by default executed in a background GCD queue.</li>
<li><a href="https://github.com/joshdholtz/ios-promises">https://github.com/joshdholtz/ios-promises</a></li>
<li><a href="https://github.com/mproberts/objc-promise">https://github.com/mproberts/objc-promise</a></li>
</ol><p>IMO you get the cleanest, most readable code with PromiseKit. And PromiseKit actually goes that step further and gives you tools that make using Promises with the iOS SDK <em>delightful</em>.</p>

<h1>
<a name="caveats" class="anchor" href="#caveats"><span class="octicon octicon-link"></span></a>Caveats</h1>

<ul>
<li>With Objective-C we are used to explicit types, Promises turn everything into <code>id</code>. This can be a little unnerving, but in reality is less problematic than you might expect. After all, all other common modern languages are like this.</li>
</ul>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/mxcl">mxcl</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>